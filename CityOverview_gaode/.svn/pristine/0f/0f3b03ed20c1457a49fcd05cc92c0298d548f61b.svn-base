/**
 * Created by tonghao on 2017/11/6.
 * polygon 方法在main页面中统一封装
 */
var edu={
    timer:[],//interval定时器
    sout:[],//一次性定时器
    NO:0,//定时器用计数器
    //小学上点上学区
    fnX:function(){
        $.ajax({    //所有小学学校上点
            type: 'post',
            url: "jsonData/primarySchool.json",
            dataType: 'JSON',
            success: function (data) {
                var len=data.features.length;
                for(var i=0;i<len;i++){
                    edu.addPoint(wgs84togcj02(data.features[i].geometry.x,data.features[i].geometry.y),24,24,'images/x.png',data.features[i]);
                }
            }
        })
        $.ajax({    //所有小学学区绘制
            type: 'post',
            url: "jsonData/primaryRings.json",
            dataType: 'JSON',
            success: function (data) {
                var arr=data.features;
                var len=arr.length;
                for(var i=0;i<len;i++){
                    polygon(arr[i].geometry.rings[0])
                }
            }
        })
    },
    //中学上点上学区
    fnC:function(){
        $.ajax({    //所有中学学校上点
            type: 'post',
            url: "jsonData/juniorSchool.json",
            dataType: 'JSON',
            success: function (data) {
                var len=data.features.length;
                for(var i=0;i<len;i++){
                    edu.addPoint(wgs84togcj02(data.features[i].geometry.x,data.features[i].geometry.y),24,24,'images/c.png',data.features[i]);
                }
            }
        })
        $.ajax({    //所有中学学区绘制
            type: 'post',
            url: "jsonData/juniorRings.json",
            dataType: 'JSON',
            success: function (data) {
                //console.log( data)
                var arr=data.features;
                var len=arr.length;
                for(var i=0;i<len;i++){
                    polygon(arr[i].geometry.rings[0])
                }
            }
        })
    },
    eduAjax:function(){
        edu.NO=0;//默认第一次显示出来的是小学坐标
        edu.timer=setInterval(function(){
            map.clearMap();//清除地图
            if(edu.NO<1){
                edu.fnX();
            }
            if(edu.NO>=1){
                edu.fnC();
                edu.NO=0;
                return
            }
            edu.NO++;
        },3000)
    },
    addPoint:function addPoint(arr,h,w,img,details){//arr =[经度,纬度]；h=图片高度，w=图片宽	度；img=图片路径
        var _marker=new AMap.Marker({
            map: map,
            position: arr,        //经纬度
            icon: new AMap.Icon({
                size: new AMap.Size(h, w),  //图标大小
                image: img       //自定义图片
            })
        });
        _marker.setExtData(details);
        //map.setCenter([details.geometry.x,details.geometry.y]);
        //AMap.event.addListener(_marker,'click',function(e){
        //    //console.log(e.target.Xg.extData)
        //    console.log(e.target.Xg.extData.attributes.NAME)
        //    //shbz.infoWindow(details)
        //});
        AMap.event.addListener(_marker,'mouseout',function(e){
            //console.log(e.target.Xg.extData)
            console.log("我移出了")
            //shbz.infoWindow(details)
        });
    }
}
    //["嘉兴市阳光小学","北京师范大学南湖附属学校"]
    //["东北师范大学南湖实验学校", "嘉兴市清河中学"]
    //[120.73988738239689,30.793359045983209]
    //[120.79898194376176,30.747723576481917]
    //[120.81706721747821,30.748165815400114]
    //[120.74330136626509,30.779851617358304]
    var arr1=[[120.72800369425624, 30.785445204237455], [120.72715798392913, 30.78519355540109], [120.72492607325417,30.78690419874431], [120.7240495798185,30.787767019807017], [120.72203317948563, 30.789887990831975], [120.72053304990358, 30.791497235340003], [120.71943938740729, 30.793867210608617], [120.71747818326227, 30.800222414203965], [120.7224156901992, 30.801824928393515], [120.72749154762369, 30.803525895204633], [120.73595023431669, 30.806089885547898],[120.7388510443147, 30.80595136130994],[120.74434439477557, 30.798549924763606],[120.74642971934698, 30.796339744587662],[120.74929572098985, 30.792229927444243],[120.74994791366092, 30.790706900156529],[120.75011594067115, 30.788230557608198],[120.74605921255332, 30.787962611496514],[120.74475578852579, 30.787876500622186],[120.74321140007059, 30.78772606877984],[120.73981624517886, 30.787395323241082],[120.73852983381137, 30.78724725360377],[120.73559043859788, 30.786753627170441],[120.73422675695326, 30.786523695760959],[120.73243937020305, 30.786222609083381],[120.73024170640761, 30.785852389462857],[120.72921479074469, 30.785679387101386],[120.72800369425624, 30.785445204237455]]
    var arr2=[[120.79553230253762, 30.754969848081995], [120.79596791655531, 30.754952927149201], [120.79714649087519, 30.754959547903681], [120.79975530841112, 30.754790557260762], [120.80091402969366, 30.754572143860209], [120.80244398689429, 30.75413710931042], [120.80407804632053, 30.753723875218746], [120.80593730647948, 30.75323356848024], [120.80716670659302, 30.752904373081702], [120.80767769180321, 30.752670428241423], [120.80769258770036, 30.752680200381914], [120.80815337015997, 30.752614051189187], [120.80801033996308, 30.738660691379398], [120.8080103391766, 30.738660613760899], [120.8017769571356, 30.738780173338373], [120.80177629448291, 30.738778385673715], [120.80102107738666, 30.738792825107296], [120.79583506095989, 30.738904246467605], [120.79147392894684, 30.739021814371501], [120.78573298577109, 30.739510202501613], [120.78284405986589, 30.739806098868261], [120.78060443421482, 30.740018682596734], [120.77870148394646, 30.740106091894688], [120.77627989576818, 30.740135553043324], [120.77628405178567, 30.74326204648894], [120.77630571221975, 30.745964835977219], [120.77631749012974, 30.748809806661932], [120.77631749519524, 30.748815597716394], [120.77631944173932, 30.751198961798398], [120.77631511462772, 30.7527479858562], [120.7763251966076, 30.755114594884727], [120.78072015427993, 30.755071525310939], [120.78571638751959, 30.754983246667848], [120.79157229069347, 30.754979865406135], [120.79276565351145, 30.754979116431073], [120.79553230253762, 30.754969848081995]]
    var arr3=[[120.81327314310136, 30.753000258487873], [120.81330571096817, 30.752896662099886], [120.81335897473491, 30.752665365884639], [120.81342912113064, 30.752422974303727], [120.8134663249084, 30.752301761519163], [120.81352105875646, 30.75224644436355], [120.81352098732953, 30.7522447001449], [120.81352104360553, 30.752244644209043], [120.81351818699375, 30.752175838897699], [120.81351578848, 30.752117977687476], [120.81352811121451, 30.752074085880338], [120.81359050474077, 30.751919729364147], [120.81364025647702, 30.751776451968283], [120.81368222498088, 30.751654245865097], [120.81369828434379, 30.751607454892621], [120.81370615953529, 30.751534085671835], [120.81376806861829, 30.751321066476692], [120.8138176344554, 30.751155790187113], [120.81381764382218, 30.751155691036047], [120.8138294527314, 30.751045731079898], [120.81390812967743, 30.750806951331185], [120.81391691687043, 30.750762566127094], [120.81392849098722, 30.750704174872908], [120.81404101351711, 30.75045053771737], [120.81409054734684, 30.75028159045354], [120.81411961662729, 30.750204424489084], [120.81412368185988, 30.750203363267929], [120.81415833955896, 30.750194336762149], [120.81419165241368, 30.750185670522171], [120.81434499767886, 30.750243420692186], [120.81435933346108, 30.750246339644377], [120.81448536253356, 30.75027192306419], [120.81457484516443, 30.7503372176526], [120.81456306477537, 30.750423651651545], [120.81456331056881, 30.75042376580933], [120.81456307994404, 30.75042545180446], [120.81465686645822, 30.750468896016798], [120.81475316828039, 30.750492382120001], [120.81495045209795, 30.750540489913305], [120.81511210320252, 30.750576198207227], [120.81530371923225, 30.750641061278372], [120.81532650853921, 30.750644362562468], [120.81564382920624, 30.750690375630825], [120.81575003774503, 30.750697078147425], [120.81597498146402, 30.750684746673812], [120.81611509611241, 30.750683913874866], [120.8164248863427, 30.750663742934762], [120.81642466466758, 30.750661954471695], [120.81642487113993, 30.750661942782756], [120.81641575991955, 30.750588664926454], [120.81641540362818, 30.750546476963279], [120.81664037540338, 30.750537804675844], [120.81687814096279, 30.750536388297917], [120.81702240121638, 30.75052453317744], [120.81722611526789, 30.750512323011606], [120.81748904382539, 30.750474096564346], [120.81779011724063, 30.750428298962163], [120.81784301198218, 30.750658965428727], [120.81793397046772, 30.750871075388375], [120.81795631142563, 30.751002928730486], [120.817957599068, 30.751155110311799], [120.81795761430408, 30.751156911013595], [120.81800939284881, 30.751255586066634], [120.81803586159526, 30.751372758962361], [120.81807500019306, 30.751482513603094], [120.81809300826581, 30.751603399228543], [120.81817488579895, 30.751745893191469], [120.81832591782995, 30.751712328322697], [120.81832745015299, 30.751711985526526], [120.81838658332924, 30.751674965447251], [120.81850503443627, 30.751622932636678], [120.81860680196223, 30.751607656207852], [120.81862797488043, 30.751600196240588], [120.81867984704797, 30.751709883484239], [120.81869580815078, 30.751746931719651], [120.8187318225348, 30.751830556491655], [120.81876231472211, 30.75192203411342], [120.81891088602026, 30.751917481092164], [120.81898712549901, 30.751895023934765], [120.81915648528741, 30.751839013280517], [120.81932987782955, 30.751757315884277], [120.81940602336579, 30.751723864001235], [120.81968949556654, 30.751604838036371], [120.82012127427959, 30.751451923356854], [120.82034982068649, 30.75136621959723], [120.82068001555172, 30.751250577774329], [120.82084909851108, 30.751161568317627], [120.82111166968184, 30.751082998394793], [120.82132744827175, 30.750993705379869], [120.82162354507591, 30.75086358873051], [120.82178435580931, 30.75080215845577], [120.82178139153177, 30.750797450074515], [120.8218607777261, 30.750801695886082], [120.82209752561198, 30.750682940412673], [120.82222891659535, 30.750656482303043], [120.82245742001692, 30.750567107548136], [120.82260960656595, 30.750489190168423], [120.82274951819716, 30.750466341747313], [120.82292301963741, 30.75039929865676], [120.82317227382521, 30.750254799882043], [120.82347295075692, 30.75016498195663], [120.82367628750114, 30.750112421024312], [120.82460403255618, 30.750031015639308], [120.82460360641699, 30.750030008014789], [120.82524721892946, 30.749785540045536], [120.82572179431099, 30.749618200797443], [120.82620987221424, 30.749439039788058], [120.82677494278516, 30.749253258662122], [120.82690153208478, 30.749211637962503], [120.82756577513965, 30.74896089923368], [120.82812192618769, 30.74879304470096], [120.82889484256441, 30.748529873501241], [120.82942367217584, 30.748350430178334], [120.82999299124856, 30.748135489433309], [120.83061669782978, 30.747920204096886], [120.83128077911215, 30.747657675009691], [120.83129646457837, 30.747671025597015], [120.83157851781414, 30.747491393948792], [120.83198463645112, 30.7472774402151], [120.83239004358882, 30.746981280783018], [120.83275545709364, 30.746779328431842], [120.83236060249305, 30.744733284450149], [120.83180732534527, 30.740221277304272], [120.83179657212884, 30.740017797871644], [120.8315762860226, 30.738160068752507], [120.82284532598715, 30.738804583827232], [120.81852640665943, 30.738889070584946], [120.81768960178692, 30.738847196982761], [120.81762420106077, 30.738699839620494], [120.81749698368037, 30.738378056742988], [120.81727000421188, 30.738035356481419], [120.817130259701, 30.737702894127438], [120.81705265891105, 30.737359310938871], [120.81703831323614, 30.737133610125795], [120.81697243664837, 30.736703942487281], [120.81694500543858, 30.736403066625769], [120.81695140279271, 30.7361532443893], [120.81706399270661, 30.735949942456159], [120.81756429827408, 30.733458742131688], [120.81752045416135, 30.733445979711632], [120.81752879275803, 30.733329129763945], [120.81754132415438, 30.733155865318679], [120.81756736106911, 30.73292613649852], [120.81757968743011, 30.732728707476781], [120.8175985490351, 30.732433540571606], [120.81271581092722, 30.731489263452204], [120.81036551341606, 30.731312108452528], [120.80897091088764, 30.731333910675119], [120.80896948643408, 30.731328584175742], [120.80896875920155, 30.731328587866301], [120.80784168893808, 30.731378074966415], [120.80798355918137, 30.734470006717004], [120.8079841253624, 30.734488761609043], [120.8079715651528, 30.734495978003849], [120.80799256938496, 30.73625614942523], [120.80799440092801, 30.736409668419412], [120.80799530623108, 30.736409695812938], [120.80799617142327, 30.736623523299329], [120.807996192426, 30.736632827139488], [120.80799696052873, 30.736972052335886], [120.80799811968325, 30.737484626642242], [120.80799859974741, 30.73769654907494], [120.8079998279112, 30.738239524005905], [120.808000387986, 30.738486909908431], [120.80800071903036, 30.738633061497751], [120.80801033993566, 30.738660691379948], [120.80815337015997, 30.752614051189198], [120.80769258770033, 30.752680200382031], [120.80769484463963, 30.752681679257194], [120.80769260529939, 30.752682001075812], [120.80778790499551, 30.752744498394804], [120.80790273923469, 30.752820159569922], [120.80805805950706, 30.752892410860511], [120.8081906360328, 30.752888467106573], [120.80834884667149, 30.752865288386147], [120.80849961115439, 30.752832608950257], [120.80863826456209, 30.752784656082838], [120.80886279952767, 30.752824644789541], [120.80888717803964, 30.752846475985791], [120.80898025038255, 30.752929783921104], [120.80901038675916, 30.752957994750147], [120.8090792349235, 30.752970492808004], [120.80917814215911, 30.752968312097096], [120.80923763880207, 30.752967000827994], [120.80930335843732, 30.752961449952295], [120.80936890454404, 30.752935262156541], [120.8094375033171, 30.752916804719007], [120.80947033627706, 30.752911445124823], [120.80957779640357, 30.75289276120111], [120.80967039376924, 30.752884473517156], [120.80978699006914, 30.752886383163457], [120.81002321298433, 30.752895324374435], [120.81023864051792, 30.752919882383026], [120.81035229118277, 30.75292695772157], [120.81048393300011, 30.752941676491048], [120.81061560705859, 30.752958974007186], [120.81070229225168, 30.752958467353096], [120.81075604889918, 30.752952993490112], [120.81089076436797, 30.752978011965752], [120.81097366489212, 30.752985870355246], [120.81142846216233, 30.753028996659566], [120.81140282729393, 30.753086775032955], [120.81139704731777, 30.753110035349607], [120.81139706242993, 30.753111835505365], [120.81139732899271, 30.753143588163653], [120.81139734410488, 30.753145388319581], [120.81140106721682, 30.753239188422924], [120.81132809519568, 30.753443365008422], [120.81131650265831, 30.753487306020872], [120.8113000169667, 30.75366031524095], [120.8113000320775, 30.753662115397105], [120.81130038522213, 30.753704185652111], [120.81128575382706, 30.753937445970564], [120.81128193035454, 30.753998497209807], [120.81124967269204, 30.754073533900623], [120.81124099146029, 30.754107138655002], [120.8112410065703, 30.754108938811441], [120.81124176104095, 30.754200039444811], [120.81124177615561, 30.754201840151779], [120.8112749647712, 30.7542377795275], [120.81132880823668, 30.754242623788116], [120.81134953765968, 30.754219275908042], [120.81144761096505, 30.754151601774936], [120.81156080600329, 30.754104486048504], [120.81166791734518, 30.754044497400685], [120.81187035057303, 30.753945245771888], [120.81201332345245, 30.753885046595542], [120.81228742508961, 30.753777623967608], [120.81243934840927, 30.753714800112505], [120.81260330830503, 30.75366222425879], [120.8127998168153, 30.753570742899626], [120.81297844134554, 30.753484525175281], [120.81312420268705, 30.753401080238973], [120.81315678348733, 30.75336476343341], [120.81318606162336, 30.7532923229993], [120.81322366234724, 30.753142415867444], [120.81326552972121, 30.753024170620961], [120.81327314310136, 30.753000258487873]]
    var arr4=[[120.75050048420719, 30.785140751632326], [120.75174906682116, 30.780833502347967], [120.75213799576977, 30.777203056800246], [120.75188042259752, 30.775605919841489], [120.75132538172453, 30.775144205428063], [120.7500566280702, 30.774488751033097], [120.74901243853031, 30.773756848185727], [120.74806884556084, 30.773168063858218], [120.74763165501125, 30.77307320780163], [120.74641183413797, 30.772637334956489], [120.74377087978644, 30.771451920830646], [120.74203139967658, 30.769831060492006], [120.74128917415464, 30.76911877486506], [120.74030990730536, 30.769548149754019], [120.7384509386336, 30.769668648302162], [120.73784936730996, 30.770307517425127], [120.73631097584939, 30.771281402748823], [120.73562044733791, 30.772152197551726], [120.73381007662614, 30.772960805192536], [120.72951045597684, 30.773379567043161], [120.728263028112, 30.773501055094417], [120.72909485985431, 30.774671359241498], [120.72964429099484, 30.776037588146885], [120.7303538229022, 30.778005374447638], [120.73129723505355, 30.779832869767638], [120.72961090378035, 30.780414025939894], [120.72881943063864, 30.781026292964917], [120.72820972754685, 30.781482304071336], [120.72738960779405, 30.782177960608127], [120.7269757587782, 30.782487829189972], [120.72596020511487, 30.783081393070855], [120.72570886086523, 30.783120528739026], [120.72520110726728, 30.782822246035362], [120.7246662758338, 30.78239453492284], [120.72402410979942, 30.782044438545942], [120.72353370357655, 30.781950626128427], [120.72302550982029, 30.78211622172207], [120.72521444792419, 30.783854691025294], [120.7262161667207, 30.784662765293824], [120.72664629127844, 30.784945850205094], [120.72704336716787, 30.785154171373261], [120.72715798392913, 30.78519355540109], [120.72492607325417, 30.78690419874431], [120.7240495798185, 30.787767019807017], [120.72203317948563, 30.789887990831975], [120.72053304990358, 30.791497235340003], [120.71943938740729, 30.793867210608617], [120.71747818326227, 30.800222414203965], [120.7224156901992, 30.801824928393515], [120.72749154762369, 30.803525895204633], [120.73595023431669, 30.806089885547898], [120.7388510443147, 30.80595136130994], [120.74434439477557, 30.798549924763606], [120.74642971934698, 30.796339744587662], [120.74929572098985, 30.792229927444243], [120.74994791366092, 30.790706900156529], [120.75011594067115, 30.788230557608198], [120.75050048420719, 30.785140751632326]]
//addPoint([118.78,32.04],40,40,'images/c.png');
//addPoint([119.78,32.04],40,40,'images/c.png',"hahah");
//定义多边形区域各个坐标点pointData（此变量名不建议更改，如需更改，请将地图视角中心点、调用绘制多边形方法的变量名同步修改）
/*var polygonData = [[120.74415601981596, 30.752801628793822]
    ,[120.74336215962806, 30.75105170536996]
    ,[120.74068601428425, 30.74515206377602]
    ,[120.7399858775779, 30.742131229010223]
    ,[120.73997407393763, 30.742132121956786]
    ,[120.73911966772225, 30.74219671436936]
    ,[120.73870700773553, 30.742227910908067]
    ,[120.73695979417579, 30.742359982223245]
    ,[120.73379391516514, 30.74265309523674]
    ,[120.73291184628319, 30.742844397939507]
    ,[120.73205855678117, 30.743056139033914]
    ,[120.73085072160993, 30.74351093350651]
    ,[120.73009869850041, 30.743794098905873]
    ,[120.72916197908438, 30.74408752560965]
    ,[120.72876680589998, 30.74414391557697]
    ,[120.72790006652025, 30.74419274598219]
    ,[120.7258030411794, 30.744090558860652]
    ,[120.72312603080505, 30.743960111571283]
    ,[120.7211988082798, 30.743866192057226]
    ,[120.72142934936704, 30.751551760235223]
    ,[120.72607507836115, 30.751496176782112]
    ,[120.72895130673511, 30.751448259624816]
    ,[120.73060110666403, 30.751487378515133]
    ,[120.73171115819639, 30.751513687275875]
    ,[120.73448824339515, 30.75152568150994]
    ,[120.73583295708028, 30.751268495277895]
    ,[120.73650455395754, 30.752669952029507]
    ,[120.73661124896769, 30.753138952886392]
    ,[120.73631068571945, 30.754313418452732]
    ,[120.73619373759497, 30.75568057648701]
    ,[120.7382485959082, 30.755263764799967]
    ,[120.74073712901388, 30.755067920681785]
    ,[120.742170193112, 30.754788498333784]
    ,[120.74251706370092, 30.75414734609888]
    ,[120.74340656768415, 30.753371672577313]
    ,[120.74415601981596, 30.752801628793822]];*/
//polygon(polygonData);//调用绘制多边形的方法